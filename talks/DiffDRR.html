<!DOCTYPE html>
<html>

<head>
    <title>Fast Auto-Differentiable DRRs</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../fonts/quadon/quadon.css">
    <link rel="stylesheet" href="../fonts/gentona/gentona.css">
    <link rel="stylesheet" href="../remark/slides_style_black_169.css">
</head>

<body>
    <textarea id="source">

<!-- Title Slide -->
# .left[Fast Auto-Differentiable DRRs]

<center><img src="../images/DiffDRR/optimization.gif" width="100%"></center>

<br>
Vivek Gopalakrishnan and Polina Golland
(
    <img src="../logos/email-logo.png" align='top' width=25> [vivekg@mit.edu](mailto:vivekg@mit.edu), 
    <img src="../logos/github-logo.png" align='top' width=25><a href="https://github.com/eigenvivek/DiffDRR"> eigenvivek/DiffDRR</a>
) 
<br>
<img src="../logos/hst-logo.png" align='top' width=50> [Harvard-MIT HST](https://hst.mit.edu/) |
<img src="../logos/csail-logo.png", align='top' width=50> [MIT CSAIL](https://csail.mit.edu/)


<!-- What are DRRs? -->
---
# What are DRRs?

<u>D</u>igitally <u>R</u>econstructed <u>R</u>adiographs (DRRs) are simulated X-ray images created from CT volumes.

---
# What are DRRs?

<u>D</u>igitally <u>R</u>econstructed <u>R</u>adiographs (DRRs) are simulated X-ray images created from CT volumes.

<center><img src="../images/DiffDRR/schematic.001.png" width="100%"></center>

---
# What are DRRs?

<u>D</u>igitally <u>R</u>econstructed <u>R</u>adiographs (DRRs) are simulated X-ray images created from CT volumes.

<center><img src="../images/DiffDRR/schematic.002.png" width="100%"></center>

---
# What are DRRs?

<u>D</u>igitally <u>R</u>econstructed <u>R</u>adiographs (DRRs) are simulated X-ray images created from CT volumes.

<center><img src="../images/DiffDRR/schematic.003.png" width="100%"></center>

<!-- DRR applications -->
---
# DRRs are used in many algorithms

---
# DRRs are used in many algorithms

<center><img src="../images/DiffDRR/applications.001.png" width="90%"></center>

---
# DRRs are used in many algorithms

<center><img src="../images/DiffDRR/applications.002.png" width="90%"></center>

<small>Franz *et al*. "Volumetric reconstruction from a limited number of digitally reconstructed radiographs using CNNs." *Proc. of the OAGM Workshop.* 2018.</small>

<!-- DRR optimization -->
---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.001.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.002.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.003.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.004.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.005.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.006.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.007.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.008.png" width="100%"></center>

---
# Optimizing DRR parameters is slow

<center><img src="../images/DiffDRR/optimization.009.png" width="100%"></center>

<!-- Analogy to inverse graphics -->
---
# Try an inverse graphics approach

Existing DRR generators are <u>simple renderers</u>:

- ✅ They solve the *forward process* of image syntheis quickly.

- ❌ They are not differentiable.

<u>Differentiable renderer</u> explicitly models the relationship between changes in model parameters and synthesized images.

- ✅ They solve the *forward process* of image syntheis quickly.

- ✅ They solve the *backward process* of image optimization quickly (auto-differentiablility!).

<!-- Introduce our model -->
---
# Our auto-differentiable DRR renderer

$$ \mathrm{DRR}~_{\theta, \varphi, \gamma, b_x, b_y, b_z} : CT \mapsto X $$

<center><img src="../images/DiffDRR/siddon.001.png" width="80%"></center>

<small>
    Siddon. "Fast calculation of the exact radiological path for a three-dimensional CT array." *Medical Physics*, 1985.
</small>

---
# Example: 2D-to-3D registration (6 DoF)

    </textarea>
    <script src="../remark/remark-latest.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <script type="text/javascript">

        var options = {};
        var renderMath = function () {
            renderMathInElement(document.body);
            // or if you want to use $...$ for math,
            renderMathInElement(document.body, {
                delimiters: [ // mind the order of delimiters(!?)
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false },
                    { left: "\\[", right: "\\]", display: true },
                    { left: "\\(", right: "\\)", display: false },
                ]
            });
        }

        remark.macros.scale = function (percentage) {
            var url = this;
            return '<img src="' + url + '" style="width: ' + percentage + '" />';
        };

        var slideshow = remark.create(options, renderMath);

    </script>
</body>

</html>